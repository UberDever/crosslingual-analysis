
# Insights/ideas

Отслеживание ошибок и инконсистентностей.

Дано: граф, узлы которого это:
- scope
- identifier

А ребра это отношения в виде:
- declares
- references
- linked scope (directly or nominally)

Нужно обеспечить способ анализа такого графа **после** построения. Соответственно, такой пайплайн:
1. Собрать ограничения из которых будет строиться граф (Translation)
1. Решить ограничения получив подстановку σ которая даст отображение переменных в известные идентификаторы.

Это дает *решенные ограничения* (или решенный граф), которые в свою очередь ничего не значат, их нужно интерпретировать.
Есть возможность наложить *дополнительные ограничения* на ref/decl, такие, что получив решенный граф, можно будет
сказать имеются ли в нем инконсистентности исходя из ограничений на идентификаторы.

Возможные ограничения C:
1. Для каждого r в области s, если MustResolve(r, s) => d должен существовать. Иначе ошибка: Неразрешенная ссылка
1. Для каждого d в области s, если Essential(d, s) => d обязан иметь как минимум одну ссылку. Иначе ошибка: Неиспользованное определение
1. Для каждого d в области s, если Exclusive(d, s) => d обязан иметь не более одной ссылки. Иначе ошибка: Множество ссылок на неразделяемый ресурс

Если такие ограничения отсутствуют для определенного d или r, считается что:
- В случае d (2, 3): допускается существование любого количества ссылок (>= 0)
- В случае r (1): допускается отсутствие соответствующего объявления (т.е. пары (r, d))

Заметим, что с данными ограничениями допускается существование множества одинаковых d. Это может вести
к can't resolve reference to declaration, поэтому имеет смысл ограничить возможные объемы множества одинаковых объявлений D = {d | d<sub>i</sub> = d<sub>j</sub>}.

Таким образом, к C добавляется еще одно возможное ограничение:
- Для любого D, если Iconic(d) и d in D: |D| = 1

Соответственно, если такое ограничение отсутствует, считается что данное определение d<sub>i</sub> может
встречаться в графе неоднократно.

Все эти ограничения будут добавлены к набору остальных ограничений, но не будут использоваться для разрешения графа.
Они будут использоваться лишь для интерпретации графа после его решения.

# TODO

## Несрочно неважно

- [x] Подумать, нужен ли анализ неисполняемых сущностей, в первую очередь определений типов данных для межфрагментного анализа
    * Не нужен

## Несрочно важно

- [ ] Изменить описание про MLSA в итоговой ВКР
- [x] Почитать https://arxiv.org/abs/1808.01210
- [x] Расписать про дихотомию исполняется/неисполняется, использовать статью <?>
- [x] Расписать про ценности анализа
    - [x] Анализ на основе формальной модели, завязанной на фрагментах (модулях) и их линковке
    - [x] Механизм дальнейшей эксплуатации информации о связях
- [x] Почитать про [LSP](https://microsoft.github.io/language-server-protocol/)
- [x] Возможно, инференс эффектов и парсер можно сделать тупо через конфигурацию? No
- [x] Проработать fallback анализ (для кейсов с например встроенными языками)
- [x] Хороший первый прототип - анализатор который полностью корректно пробрасывает все запросы от ide в моно lsp, но не делает анализа (identity анализатор) 
- [x] Почитать [BSP](https://build-server-protocol.github.io/)
    - Фигня сырая...
- [x] Порисерчить парсинг для МЯ программ
    - [x] Дочитать диссер
- [x] Использовать ad hoc directed translation для построения фрагментов
- [x] Описать фрагменты и их семантику более формально
    - [x] Дочитать Карделли
- [x] Спросить про Fuzzy logic
    - Не первостепенно
- [x] Решить вопрос с грамматиками и syntax-directed translation [SDT](http://www.cse.iitm.ac.in/~krishna/cs3300/lecture4.pdf)
    - Решился через идею о протоколе
- [x] Провести выборку проектов на гитхабе с несколькими языками (Usecases!!!)
- [x] Написать/адаптировать анализаторы с соответствующими языками
- [x] Сделать прототип основного анализатора
- [x] Сделать dot рисовалку графов
- [x] Доработать истоки-стоки - что является фактами, а что можно линковать?
    - [x] Разобраться со строчкой 47 (doTwoPlusTwo), подумать над env: [3, 5, 8] (откуда там эта инфа?)
- [x] Сделать обзорную статью методов разрешения проблем с областями (по сути обозреть 3 статьи по scope graphs)
    - [x] Рассмотреть статьи отсюда https://research.tudelft.nl/en/persons/h-van-antwerpen
- [ ] Использовать/изучить spoofax workbench для построения анализаторов
- [x] Подумать над использованием SSA вместо AST для повышения полноты анализа
    - потом, возможно никогда...
- [x] Рассмотреть расширение скопграфов (или это уже к ним не относится?) в отношении:
    - [x] Семантики user/used для идентификаторов (it references that)
        * Учитывается в семантике лейблов у ребер графа. Взято из третей по счету статьи
    - [x] Семантика языковых барьеров (окраски ребер графа). Возможно, достаточно последующей интерпретации и отметания связей
        * То же, что и выше. Правда, возможно необходимо будет немного повозится
- [x] Расписать evaluation/usecases
    - [x] Источники данных
    - [x] Конфигурация окружения (и нужные данные из него)


## Срочно неважно
  
- [x] Сделать разноплановые тесты на прототип 2
- [x] Обзор текущих конференций (напр КМУ)
- [x] Ису достижения
- [x] Манир по результатам прошлого года, ближайшая конференция - майоровские чтения

## Срочно важно

- [x] Отчет по 2 семестру
- [x] Отчет: Do another prototype, consult language and implications of that (maybe go for abstract analyzer in something simple like Go?)
- [x] Отчет: Do prototype for at least three scenarious, all different kind
- [x] Отчет: Test, maybe benchmark stuff
- [x] Отчет: Write discussion basically (maybe not full)
    - [x] Отписать про внутримодульный и межмодульный анализ
- [x] Прототип 2, гетерогенный лист
- [x] Прототип 2, семантическая сеть и анализатор
- [x] Прототип 2, юзкейс 1
    - [x] анализ
- [x] Прототип 2, юзкейс 2
    - [x] анализ
- [x] Прототип 2, юзкейс 3
    - [x] анализ
- [x] Рассмотреть идею взаимодействия языков в юзкейсах как модулей
- [x] Ввести онтологию для такого универсального межмодульного взаимодействия
- [x] Презентация
- [ ] Cоставить ТЗ
- [ ] Написать разделы ВКР (до 24.03)
    - [ ] Обзор ПрО и решений
    - [ ] Описание предполагаемого решения
- [ ] Первее, чем то что выше - сделать микропрезу и доклад до 3 мин
    * Тема ВКР
    * Актуальность темы. Здесь для обоснования следует использовать данные, например, из статистических отчетов, подтверждающих актуальность решаемых задач (проблем).
    * Цель и задачи ВКР.
    * Практическая ценность работы. Здесь надо описать тот программный (или не программный) продукт, который разрабатывается в ВКР с указанием % его готовности к данному моменту. 
    * Доп. сведения (при наличии). Здесь можно представить результаты апробации (доклады на конференция, опубликованные статьи) и внедрения работы.
- [ ] Сделать начальные трансляторы (отображения text -> AST + траверс) для каждого из включенных языков
    * [X] Golang
    * [x] JSON
    * [x] HTML
    * [x] XML
    * [x] Python
    * [~] Makefile/shell?
    * [ ] Shell
    * [ ] C#
    * [ ] VB
    * [ ] JS
    * [ ] Fortran (нужно брать antlr видимо...)
    * [x] C++
- [x] Попробовать переделать всю обработку трансляторов в go
- [x] Реструктурировать протокол
    * Пока основная часть будет по пейперу
- [x] Переделать всё под JSON
    - [x] toDot
    - [x] трансляторы
- [x] external-dependencies.pdf 3.2 рассмотреть ограничения на связи
- [x] Дополнить онтологию конструкциями, позволяющими задавать подграфы определенной структуры для
общности семантического анализа между разными анализаторами
- [ ] Golang translator mock
    * [ ] Как сделать грамотный референс?
- [ ] JS translator mock?
- [ ] Analyzer
    * [ ] Recognizer mock + infrastructure
    * [ ] SystemInfoProvider mock + infrastructure
    * [ ] Solver
    * [ ] Polytranslator (Mediator)
    * [ ] Analyzer protocol
- [ ] LSP Adapter